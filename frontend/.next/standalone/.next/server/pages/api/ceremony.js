"use strict";(()=>{var e={};e.id=6491,e.ids=[6491],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},6682:(e,t,a)=>{a.r(t),a.d(t,{config:()=>f,default:()=>m,routeModule:()=>p});var n={};a.r(n),a.d(n,{default:()=>d});var r=a(1802),s=a(7153),i=a(6249),o=a(2048),l=a.n(o),c=a(5315),u=a.n(c);async function d(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let a;let n=u().join(process.cwd(),"..","ceremonial_inscriptions_backup.json");if(l().existsSync(n)){let e=l().readFileSync(n,"utf-8");a=JSON.parse(e)}else a={codex_festival_status:"AWAITING_FIRST_CEREMONY",created:new Date().toISOString(),cycles:[],total_ceremonies:0};let{limit:r,kind:s}=e.query,i=a.cycles||[];if(s&&"string"==typeof s&&["proclamation","silence","blessing"].includes(s)&&(i=i.filter(e=>e.kind===s)),r&&"string"==typeof r){let e=parseInt(r,10);!isNaN(e)&&e>0&&(i=i.slice(-e))}i.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());let o=i.reduce((e,t)=>(e[t.kind]=(e[t.kind]||0)+1,e),{}),c={status:a.codex_festival_status,total_ceremonies:a.total_ceremonies,last_ceremony:a.last_ceremony,last_updated:a.last_updated,cycles:i,metadata:{filtered_count:i.length,total_count:a.total_ceremonies,ceremonial_kinds:Object.keys(o),ceremonial_stats:o,flame_status:i.length>0?i[i.length-1].flame_status:"awaiting_first_ceremony"}};t.status(200).json(c)}catch(e){console.error("Error reading ceremonial data:",e),t.status(500).json({error:"Failed to read ceremonial data",status:"ERROR",cycles:[],total_ceremonies:0,message:"The sacred altar is temporarily unavailable - ceremonial data cannot be accessed"})}}let m=(0,i.l)(n,"default"),f=(0,i.l)(n,"config"),p=new r.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/ceremony",pathname:"/api/ceremony",bundlePath:"",filename:""},userland:n})},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=6682);module.exports=a})();