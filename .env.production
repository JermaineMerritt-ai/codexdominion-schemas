# =============================================================================
# CODEX DOMINION - PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# Updated: 2025-12-07 - IONOS + Azure Deployment
# IMPORTANT: Never commit this file to version control
# =============================================================================

# =============================================================================
# DEPLOYMENT TARGET - 3-CLOUD ARCHITECTURE
# =============================================================================
DEPLOYMENT_TARGET=3cloud
# Azure (Backend) + IONOS (Frontend) + GCP (Creative Engine)

# =============================================================================
# AZURE CONFIGURATION
# =============================================================================
AZURE_SUBSCRIPTION_ID=054bb0e0-6e79-403f-b3fc-39a28d61e9c9
AZURE_TENANT_ID=d6fd8270-b2a6-4492-9fd5-79def18a9452
AZURE_RESOURCE_GROUP=codex-dominion-prod
AZURE_LOCATION=eastus2
AZURE_CONTAINER_APP=codex-backend
AZURE_ACR_NAME=codexdominionacr

# =============================================================================
# IONOS CONFIGURATION
# =============================================================================
IONOS_SERVER=74.208.123.158
IONOS_USER=root
IONOS_SSH_KEY=C:/Users/JMerr/.ssh/id_rsa
IONOS_DEPLOY_PATH=/var/www/codexdominion.app

# =============================================================================
# GOOGLE CLOUD CONFIGURATION
# =============================================================================
GCP_PROJECT_ID=codex-dominion-production
GCP_REGION=us-central1
GCP_SERVICE=codex-creative-engine

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
NODE_ENV=production
ENVIRONMENT=production
PORT=8001
HOST=0.0.0.0
BACKEND_PORT=8000

# =============================================================================
# DOMAIN CONFIGURATION - IONOS
# =============================================================================
DOMAIN=codexdominion.app
API_DOMAIN=api.codexdominion.app
NEXT_PUBLIC_API_URL=https://api.codexdominion.app
NEXT_PUBLIC_SITE_URL=https://codexdominion.app
NEXT_PUBLIC_WS_URL=wss://api.codexdominion.app/ws
API_BASE_URL=https://api.codexdominion.app

# =============================================================================
# DOMAIN CONFIGURATION - AZURE
# =============================================================================
AZURE_SITE_URL=https://codexdominion.azurewebsites.net
AZURE_API_URL=https://codexdominion-api.azurewebsites.net
AZURE_WEB_APP_NAME=codexdominion
AZURE_WEB_APP_API_NAME=codexdominion-api
AZURE_RESOURCE_GROUP=codexdominion-prod
AZURE_LOCATION=eastus

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================
# CRITICAL: Generate a secure random key for production
# Example: openssl rand -hex 32
SECRET_KEY=PgoniCuZqAdzFJDcExQmNjGU1a0tT5B3Sf47vY8sw9WhLbe2krROV6pHlIKXyM
JWT_SECRET=0VJNI1a8LMdBErKmQjnRheXpkoWi63ZDzy7YA4gPs2O9GlqSwvfxCubF5THUtc
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600
API_KEY=LoQJw82cBbCHx073ZdSsRtMENmVOyYFa
ALLOWED_HOSTS=codexdominion.app,api.codexdominion.app,codexdominion.azurewebsites.net
CORS_ORIGINS=https://codexdominion.app,https://www.codexdominion.app

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
# IONOS Database
DATABASE_URL=postgresql://codexdominion:CHANGE_POSTGRES_PASSWORD@localhost:5432/codex_dominion_prod
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=codex_dominion_prod
POSTGRES_USER=codexdominion
POSTGRES_PASSWORD=W2SJxC6o3y1hcHBG5Zes7ArLiamTNb4E

# Azure Database (Alternative)
AZURE_DATABASE_URL=postgresql://codexadmin@codexdominion:CHANGE_AZURE_PASSWORD@codexdominion-db.postgres.database.azure.com:5432/codexdominion?sslmode=require
AZURE_POSTGRES_HOST=codexdominion-db.postgres.database.azure.com
AZURE_POSTGRES_USER=codexadmin@codexdominion
AZURE_POSTGRES_PASSWORD=CHANGE_AZURE_PASSWORD

# Connection Pooling
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# REDIS CONFIGURATION (Caching & Sessions)
# =============================================================================
# IONOS Redis
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_ENABLED=true
REDIS_CACHE_TTL=3600
REDIS_PASSWORD=YuWtdbZxq9p3MNGHAkEi4rIzFQg0jXKU

# Azure Redis Cache (Alternative)
AZURE_REDIS_URL=rediss://:CHANGE_AZURE_REDIS_PASSWORD@codexdominion.redis.cache.windows.net:6380/0
AZURE_REDIS_HOST=codexdominion.redis.cache.windows.net
AZURE_REDIS_PORT=6380
AZURE_REDIS_SSL=true

# =============================================================================
# FASTAPI BACKEND SETTINGS
# =============================================================================
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8000
WORKERS=4
LOG_LEVEL=info
RELOAD=false

# =============================================================================
# DIGITAL SEAL SERVICE CONFIGURATION
# =============================================================================
RSA_KEY_SIZE=2048
RSA_PUBLIC_KEY_PATH=/app/keys/rsa_public.pem
RSA_PRIVATE_KEY_PATH=/app/keys/rsa_private.pem
ECC_CURVE=P-256
ECC_PUBLIC_KEY_PATH=/app/keys/ecc_public.pem
ECC_PRIVATE_KEY_PATH=/app/keys/ecc_private.pem
SEAL_VERIFICATION_ENABLED=true
EXPORT_VERIFICATION_BASE_URL=https://verify.codexdominion.app

# =============================================================================
# SPATIAL AUDIO & RITUAL EXPERIENCE
# =============================================================================
FEATURE_SPATIAL_AUDIO=true
FEATURE_RITUAL_EXPERIENCE=true
AUDIO_SAMPLE_RATE=48000
AUDIO_MAX_SOURCES=25

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WS_PORT=8001
WS_MAX_CONNECTIONS=1000
WS_PING_INTERVAL=30

# =============================================================================
# PYTHON ENVIRONMENT
# =============================================================================
PYTHONPATH=./src:./codexdominion:./codexdominion-schemas
PYTHONUNBUFFERED=1

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
ENABLE_ANALYTICS=true
LOG_FILE=/var/log/codexdominion/app.log
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_ROTATION=midnight
LOG_BACKUP_COUNT=30

# Application Insights (Azure)
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=CHANGE_THIS

# =============================================================================
# IONOS SPECIFIC
# =============================================================================
IONOS_VPS_IP=74.208.123.158
IONOS_SSH_USER=root
IONOS_DEPLOY_PATH=/var/www/codexdominion

# =============================================================================
# AZURE SPECIFIC
# =============================================================================
AZURE_SUBSCRIPTION_ID=CHANGE_THIS
AZURE_APP_SERVICE_PLAN=codexdominion-plan

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/letsencrypt/live/codexdominion.app/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/codexdominion.app/privkey.pem
SSL_REDIRECT=true

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# FILE STORAGE
# =============================================================================
UPLOAD_DIR=/app/uploads
MAX_UPLOAD_SIZE=10485760
ALLOWED_EXTENSIONS=pdf,md,yaml,json

# Azure Blob Storage (Optional)
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=codexdominion;AccountKey=CHANGE_THIS;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER=exports

# =============================================================================
# MAINTENANCE MODE
# =============================================================================
MAINTENANCE_MODE=false

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================
SMTP_HOST=smtp.ionos.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=

SMTP_FROM=noreply@codexdominion.app

# =============================================================================
# CLOUDFLARE / CDN (Optional)
# =============================================================================
CLOUDFLARE_ZONE_ID=
CLOUDFLARE_API_TOKEN=

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_DIR=/var/backups/codexdominion
BACKUP_RETENTION_DAYS=30

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_SIGNALS=true
ENABLE_CAPSULES=true
ENABLE_DISPATCH=true
ENABLE_REPLAY=true
MAINTENANCE_MODE=false
